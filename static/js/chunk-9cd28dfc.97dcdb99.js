(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9cd28dfc"],{"19a5":function(e,t,s){"use strict";var a=s("a939"),n=s.n(a);n.a},"356b":function(e,t,s){},"718c":function(e,t,s){"use strict";var a=s("356b"),n=s.n(a);n.a},a939:function(e,t,s){},e529:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"web-title",rawName:"v-web-title",value:{title:"收件箱"},expression:"{title:'收件箱'}"}],staticClass:"Inbox"},[s("el-col",{attrs:{span:4}},[s("work-space")],1),s("el-col",{attrs:{span:20}}),s("el-container",[s("el-main",[s("div",{staticClass:"titleOfInbox"},[s("h3",[e._v("收件箱")])]),s("div",{staticClass:"MessageCard"},[s("messageCard",{attrs:{messages:e.messages},on:{getChangeFromSon:e.getChangeFromSon}}),s("br")],1)]),s("el-aside",{staticStyle:{"text-align":"center",padding:"50px","line-height":"80px"}},[s("div",[s("el-button",{attrs:{type:"warning",plain:""},on:{click:e.readAll}},[e._v("全部已读")])],1),s("div",[!0===e.ifGetAllMessage?s("el-button",{attrs:{type:"primary",plain:""},on:{click:e.getMessage}},[e._v("查看未读")]):e._e()],1),s("div",[!1===e.ifGetAllMessage?s("el-button",{attrs:{type:"primary",plain:""},on:{click:e.getAllMessage}},[e._v("查看全部")]):e._e()],1),s("div",[s("el-button",{attrs:{type:"warning",plain:""},on:{click:e.deleteAll}},[e._v("全部删除")])],1)])],1)],1)},n=[],i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",e._l(e.messages,(function(t){return s("div",{key:t.label},[s("el-card",{staticStyle:{width:"500px"}},[s("el-container",[s("el-col",{attrs:{span:"3"}},[1===t.type?s("i",{staticClass:"el-icon-user",staticStyle:{"margin-top":"40%","margin-left":"10px"}}):e._e(),2===t.type?s("i",{staticClass:"el-icon-s-comment",staticStyle:{"margin-top":"40%","margin-left":"10px"}}):e._e(),3===t.type?s("i",{staticClass:"el-icon-close",staticStyle:{"margin-top":"40%","margin-left":"10px"}}):e._e(),4===t.type?s("i",{staticClass:"el-icon-error",staticStyle:{"margin-top":"40%","margin-left":"10px"}}):e._e(),5===t.type?s("i",{staticClass:"el-icon-user",staticStyle:{"margin-top":"40%","margin-left":"10px"}}):e._e(),6===t.type?s("i",{staticClass:"el-icon-chat-line-round",staticStyle:{"margin-top":"40%","margin-left":"10px"}}):e._e(),7===t.type?s("i",{staticClass:"el-icon-chat-round",staticStyle:{"margin-top":"40%","margin-left":"10px"}}):e._e(),8===t.type?s("i",{staticClass:"el-icon-close",staticStyle:{"margin-top":"40%","margin-left":"10px"}}):e._e(),9===t.type?s("i",{staticClass:"el-icon-error",staticStyle:{"margin-top":"40%","margin-left":"10px"}}):e._e(),10===t.type?s("i",{staticClass:"el-icon-circle-close",staticStyle:{"margin-top":"40%","margin-left":"10px"}}):e._e()]),s("el-col",{staticStyle:{"margin-top":"10px"}},[s("el-row",[s("div",{staticClass:"title"},[e._v(e._s(t.origin_user.username)+e._s(t.content))])]),s("el-row",[s("div",{staticClass:"details"},[e._v(e._s(t.document.name))])]),s("br"),s("el-row",[s("el-col",{attrs:{span:"10"}},[s("time",{staticClass:"time"},[e._v(e._s(t.time))])]),s("el-col",{attrs:{span:"14","margin-left":"200px"}},[s("el-button",{attrs:{type:"text",icon:"el-icon-view"},on:{click:function(s){return e.viewMessage(t)}}},[e._v("查看")]),s("el-divider",{attrs:{direction:"vertical"}}),s("el-button",{attrs:{type:"text",icon:"el-icon-close"},on:{click:function(s){return e.deleteMessage(t.id)}}},[e._v("删除")]),s("el-divider",{attrs:{direction:"vertical"}}),0===t.status?s("el-button",{attrs:{type:"text",icon:"el-icon-check"},on:{click:function(s){return e.readMessage(t.id,t.status)}}},[e._v("标为已读")]):e._e(),1===t.status?s("el-button",{attrs:{type:"text",disabled:"true"}},[e._v("已读")]):e._e()],1)],1)],1)],1)],1),s("br")],1)})),0)},l=[],o=(s("053b"),s("4ec3")),c={name:"messageCard",props:{messages:{type:Array,required:!0}},methods:{readMessage:function(e,t){1===t?t=0:0===t&&(t=1),Object(o["H"])(e,t).then((function(e){e.status,console.log(e)})),this.$emit("getChangeFromSon")},deleteMessage:function(e){Object(o["k"])(e).then((function(e){e.status,console.log(e)})),this.$emit("getChangeFromSon")},viewMessage:function(e){var t=this;e.status=1,1===e.type?this.$confirm("是否接受邀请加入该团队？","团队邀请",{confirmButtonText:"接受",cancelButtonText:"拒绝",type:"info"}).then((function(){Object(o["b"])(e.document.id,e.user.id).then((function(e){200===e.status&&t.$message({type:"success",message:"成功加入团队"})})).catch((function(){t.$message({type:"error",message:"加入团队失败"})}))})).catch((function(){Object(o["I"])(e.document.id,e.user.id).then((function(e){200===e.status&&t.$message({type:"success",message:"成功拒绝该团队邀请"})})).catch((function(){t.$message({type:"error",message:"拒绝团队邀请失败"})}))})):2===e.type?this.$router.push({name:"myTeam"}):3===e.type?this.$message({message:e.origin_user.username+"已退出团队",type:"info"}):4===e.type?this.$message({message:"你已被移出团队["+e.document.name+"]",type:"info"}):5===e.type||6===e.type||7===e.type||8===e.type?this.$router.push({name:"editorPage",params:{docId:e.document.id}}):9===e.type?this.$message({message:"你已被移出文档["+e.document.name+"]协作者",type:"info"}):10===e.type&&this.$message({message:e.origin_user.username+"拒绝加入团队["+e.document.name+"]",type:"info"})}}},r=c,g=(s("19a5"),s("2877")),m=Object(g["a"])(r,i,l,!1,null,null,null),u=m.exports,p=s("56d7"),d={data:function(){return{inboxTimer:"",ifGetAllMessage:!0,messages:[{id:15,user:{id:1,username:"1",head:null},origin_user:{id:2,username:"1679",head:null},document:{id:1,name:"测试"},time:"2020-08-15 22:03:10",type:6,status:0},{id:15,user:{id:1,username:"1",head:null},origin_user:{id:2,username:"1679",head:null},document:{id:1,name:"测试"},time:"2020-08-15T22:03:10.828014",type:6,status:0},{id:15,user:{id:1,username:"1",head:null},origin_user:{id:2,username:"1679",head:null},document:{id:1,name:"测试"},time:"2020-08-15T22:03:10.828014",type:6,status:1},{id:15,user:{id:1,username:"1",head:null},origin_user:{id:2,username:"1679",head:null},document:{id:1,name:"测试"},time:"2020-08-15T22:03:10.828014",type:6,status:1}]}},components:{messageCard:u},methods:{getAllMessage:function(){var e=this;Object(o["y"])().then((function(t){if(200===t.status){console.log(t),e.messages=t.data;for(var s=0;s<e.messages.length;s++)e.messages[s].time=Object(p["GetTime"])(e.messages[s].time,"."),1===e.messages[s].type?e.messages[s].content="邀请你加入团队":2===e.messages[s].type?e.messages[s].content="回复了你的团队邀请":3===e.messages[s].type?e.messages[s].content="退出了团队":4===e.messages[s].type?e.messages[s].content="将你移出团队":5===e.messages[s].type?e.messages[s].content="邀请你成为协作者":6===e.messages[s].type?e.messages[s].content="评论了你的文档":7===e.messages[s].type?e.messages[s].content="回复了你的评论":8===e.messages[s].type?e.messages[s].content="退出了文档协作者":9===e.messages[s].type?e.messages[s].content="将你移出文档协作者":10===e.messages[s].type&&(e.messages[s].content="拒绝了你的团队邀请");e.ifGetAllMessage=!0}}))},getMessage:function(){var e=this;Object(o["z"])().then((function(t){if(200===t.status){console.log(t),e.messages=t.data;for(var s=0;s<e.messages.length;s++)e.messages[s].time=Object(p["GetTime"])(e.messages[s].time,"."),1===e.messages[s].type?e.messages[s].content="邀请你加入团队":2===e.messages[s].type?e.messages[s].content="回复了你的团队邀请":3===e.messages[s].type?e.messages[s].content="退出了团队":4===e.messages[s].type?e.messages[s].content="将你移出团队":5===e.messages[s].type?e.messages[s].content="邀请你成为协作者":6===e.messages[s].type?e.messages[s].content="评论了你的文档":7===e.messages[s].type?e.messages[s].content="回复了你的评论":8===e.messages[s].type?e.messages[s].content="退出了文档协作者":9===e.messages[s].type?e.messages[s].content="将你移出文档协作者":10===e.messages[s].type&&(e.messages[s].content="拒绝了你的团队邀请");e.ifGetAllMessage=!1}}))},readAll:function(){var e=this;Object(o["G"])(localStorage.userId).then((function(t){200===t.status?(console.log(t),e.getAllMessage()):console.log(t)}))},deleteAll:function(){var e=this;Object(o["g"])(localStorage.userId).then((function(t){200===t.status?(console.log(t),e.getAllMessage):console.log(t)}))},getChangeFromSon:function(){!0===this.ifGetAllMessage?this.getAllMessage():!1===this.ifGetAllMessage&&this.getMessage()},timerGet:function(){!0===this.ifGetAllMessage?this.getAllMessage():!1===this.ifGetAllMessage&&this.getMessage()}},mounted:function(){this.getAllMessage(),this.inboxTimer=setInterval(this.timerGet,1e4)},beforeDestroy:function(){clearInterval(this.inboxTimer)},watch:{ifGetAllMessage:{handler:function(e,t){console.log(e),console.log(t),e!==t&&(!0===this.ifGetAllMessage?this.getAllMessage():!1===this.ifGetAllMessage&&this.getMessage())}}}},y=d,f=(s("718c"),Object(g["a"])(y,a,n,!1,null,null,null));t["default"]=f.exports}}]);
//# sourceMappingURL=chunk-9cd28dfc.97dcdb99.js.map